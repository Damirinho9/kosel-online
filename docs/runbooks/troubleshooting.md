# Troubleshooting - –¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

## –ó–∞–ø—É—Å–∫ –ø—Ä–æ–≤–µ—Ä–∫–∏

–ü–µ—Ä–µ–¥ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π –ø—Ä–æ–±–ª–µ–º –≤—Å–µ–≥–¥–∞ –∑–∞–ø—É—Å–∫–∞–π—Ç–µ:

```bash
bash scripts/check_all.sh
```

–≠—Ç–æ—Ç —Å–∫—Ä–∏–ø—Ç –ø—Ä–æ–≤–µ—Ä–∏—Ç:
- –°—Ç—Ä—É–∫—Ç—É—Ä—É –ø—Ä–æ–µ–∫—Ç–∞
- –í–∞–ª–∏–¥–Ω–æ—Å—Ç—å manifest.json
- –ù–∞–ª–∏—á–∏–µ –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π
- –°–∏–Ω—Ç–∞–∫—Å–∏—Å JavaScript
- –£—Å—Ç–∞–Ω–æ–≤–∫—É TensorFlow.js

---

## 1. ML –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

### –ü—Ä–æ–±–ª–µ–º–∞ 1.1: "ML –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω"

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[–ö–æ–∑—ë–ª ML] ‚úó –û–±—É—á–µ–Ω–∏–µ –Ω–µ —É–¥–∞–ª–æ—Å—å: ML –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

#### A. TensorFlow.js –Ω–µ —Å–∫–∞—á–∞–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```bash
ls -lh kozel-assistant/lib/tf.min.js
```

–†–∞–∑–º–µ—Ä –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å ~1.4-1.8 MB. –ï—Å–ª–∏ —Ñ–∞–π–ª –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –∏–ª–∏ –º–µ–Ω—å—à–µ 1 MB:

**–†–µ—à–µ–Ω–∏–µ:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ –≤ Chrome: `https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.11.0/dist/tf.min.js`
2. –ù–∞–∂–º–∏—Ç–µ Ctrl+S (‚åò+S –Ω–∞ Mac)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤ `kozel-assistant/lib/tf.min.js`
4. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ `chrome://extensions/`

–ü–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏: `kozel-assistant/INSTALL_TENSORFLOW.md`

---

#### B. Offscreen document –Ω–µ —Å–æ–∑–¥–∞–Ω

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–Ω—Å–æ–ª–∏ background:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `chrome://extensions/`
2. –ù–∞–π–¥–∏—Ç–µ "–ö–æ–∑—ë–ª –ü–æ–º–æ—â–Ω–∏–∫"
3. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: service worker"
4. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
[Background] ‚úì Offscreen document —Å–æ–∑–¥–∞–Ω –¥–ª—è ML
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
[Background] ‚úó –ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å offscreen document: ...
```

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `offscreen.html` –∏ `offscreen.js` —Å—É—â–µ—Å—Ç–≤—É—é—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ permission `"offscreen"` –≤ `manifest.json`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Chrome –≤–µ—Ä—Å–∏–∏ 109+

---

#### C. –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ TensorFlow.js –≤ offscreen

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `chrome://extensions/`
2. –ù–∞–∂–º–∏—Ç–µ "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: offscreen document" (–µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø–Ω–æ)
3. –°–º–æ—Ç—Ä–∏—Ç–µ –∫–æ–Ω—Å–æ–ª—å

**–û–∂–∏–¥–∞–µ–º—ã–µ –ª–æ–≥–∏:**
```
[ML Offscreen] ‚úì TensorFlow.js –∑–∞–≥—Ä—É–∂–µ–Ω: 4.11.0
[ML Offscreen] ‚úì –ì–æ—Ç–æ–≤ –∫ –æ–±—Ä–∞–±–æ—Ç–∫–µ ML –∑–∞–ø—Ä–æ—Å–æ–≤
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ:**
```
[ML Offscreen] ‚úó TensorFlow.js –Ω–µ –∑–∞–≥—Ä—É–∂–µ–Ω
```

**–†–µ—à–µ–Ω–∏–µ:**
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ `lib/tf.min.js` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –∏ –≤–∞–ª–∏–¥–µ–Ω
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ –≤ `offscreen.html`
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

---

### –ü—Ä–æ–±–ª–µ–º–∞ 1.2: ML –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –≤—Å–µ–≥–¥–∞ –æ—Ç —ç–≤—Ä–∏—Å—Ç–∏–∫, –Ω–∏–∫–æ–≥–¥–∞ –æ—Ç ML (–Ω–µ—Ç üß† —ç–º–æ–¥–∑–∏)

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

#### A. –ú–æ–¥–µ–ª—å –Ω–µ –æ–±—É—á–µ–Ω–∞

ML —Ç—Ä–µ–±—É–µ—Ç —Ö–æ—Ç—è –±—ã 3-5 –∏–≥—Ä –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ content script (F12 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ kozel-online.com):
chrome.runtime.sendMessage({ action: 'mlStatus' }, response => {
    console.log('ML Status:', response);
});
```

**–û–∂–∏–¥–∞–µ–º—ã–π –æ—Ç–≤–µ—Ç:**
```javascript
{
    initialized: true,    // ‚Üê –î–æ–ª–∂–µ–Ω –±—ã—Ç—å true
    available: true,
    stats: { gamesPlayed: 5, ... }
}
```

**–ï—Å–ª–∏ `initialized: false`:**

**–†–µ—à–µ–Ω–∏–µ:**
- –°—ã–≥—Ä–∞–π—Ç–µ 3-5 –∏–≥—Ä –¥–æ –∫–æ–Ω—Ü–∞
- –ü–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∏–≥—Ä—ã –¥–æ–ª–∂–Ω—ã –≤–∏–¥–µ—Ç—å:
  ```
  [–ö–æ–∑—ë–ª ML] –ù–∞—á–∏–Ω–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∏–≥—Ä—ã...
  [ML Offscreen] –ù–∞—á–∏–Ω–∞–µ–º –æ–±—É—á–µ–Ω–∏–µ –Ω–∞ X –∏–≥—Ä–∞—Ö...
  [ML Offscreen] ‚úì –û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
  ```

---

#### B. –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å ML —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∞—è

ML –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å > 0.6 (—Å–º. `ai/strategy.js`)

**–ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤:**
```
[AI ML] üß† ML —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç: ‚ô†A
```

–ï—Å–ª–∏ —Ç–∞–∫–æ–≥–æ –ª–æ–≥–∞ –Ω–µ—Ç, –Ω–æ `mlInitialized: true`, –∑–Ω–∞—á–∏—Ç ML –¥–∞–µ—Ç –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è —Å –Ω–∏–∑–∫–æ–π —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é.

**–†–µ—à–µ–Ω–∏–µ:**
- –°—ã–≥—Ä–∞–π—Ç–µ –±–æ–ª—å—à–µ –∏–≥—Ä (10-20) –¥–ª—è —É–ª—É—á—à–µ–Ω–∏—è –º–æ–¥–µ–ª–∏
- –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –Ω–∞ —Ä–∞–Ω–Ω–∏—Ö —Å—Ç–∞–¥–∏—è—Ö

---

## 2. –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ kozel-online.com

### –ü—Ä–æ–±–ª–µ–º–∞ 2.1: Content script –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ù–µ—Ç UI –ø–∞–Ω–µ–ª–∏ –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ
- –ù–µ—Ç –ª–æ–≥–æ–≤ –≤ –∫–æ–Ω—Å–æ–ª–∏ (F12)

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
1. –û—Ç–∫—Ä–æ–π—Ç–µ `chrome://extensions/`
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤–∫–ª—é—á–µ–Ω–æ (toggle ON)
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ "–†–∞–∑—Ä–µ—à–µ–Ω–∏—è": –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å `https://kozel-online.com/*`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ `chrome://extensions/`
- –û–±–Ω–æ–≤–∏—Ç–µ —Å—Ç—Ä–∞–Ω–∏—Ü—É kozel-online.com (F5)
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –Ω–∞ –æ—à–∏–±–∫–∏

---

### –ü—Ä–æ–±–ª–µ–º–∞ 2.2: –ü–∞—Ä—Å–∏–Ω–≥ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[–ö–æ–∑—ë–ª –ü–æ–º–æ—â–Ω–∏–∫] ‚ö†Ô∏è –ù–µ —É–¥–∞–ª–æ—Å—å —Ä–∞—Å–ø–æ–∑–Ω–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

#### A. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ DOM –∏–∑–º–µ–Ω–∏–ª–∞—Å—å

–°–∞–π—Ç kozel-online.com –æ–±–Ω–æ–≤–∏–ª HTML —Å—Ç—Ä—É–∫—Ç—É—Ä—É.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
–û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª—å (F12) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
```javascript
// –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–µ–ª–µ–∫—Ç–æ—Ä–æ–≤:
document.querySelector('.my-cards');
document.querySelector('.table');
document.querySelector('.trump-indicator');
```

–ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç `null`, —Å–µ–ª–µ–∫—Ç–æ—Ä —É—Å—Ç–∞—Ä–µ–ª.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ù–∞–π–¥–∏—Ç–µ –Ω–æ–≤—ã–µ —Å–µ–ª–µ–∫—Ç–æ—Ä—ã —á–µ—Ä–µ–∑ –∏–Ω—Å–ø–µ–∫—Ç–æ—Ä (F12 ‚Üí Elements)
2. –û–±–Ω–æ–≤–∏—Ç–µ `content.js` (–º–µ—Ç–æ–¥—ã –ø–∞—Ä—Å–∏–Ω–≥–∞)
3. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub —Å –Ω–æ–≤—ã–º–∏ —Å–µ–ª–µ–∫—Ç–æ—Ä–∞–º–∏

---

#### B. –ò–≥—Ä–∞ –µ—â–µ –Ω–µ –Ω–∞—á–∞–ª–∞—Å—å

Content script –ø—ã—Ç–∞–µ—Ç—Å—è –ø–∞—Ä—Å–∏—Ç—å –¥–æ –Ω–∞—á–∞–ª–∞ –∏–≥—Ä—ã.

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
UI –ø–∞–Ω–µ–ª—å –ø–æ—è–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã.

**–†–µ—à–µ–Ω–∏–µ:**
–ù–∞—á–Ω–∏—Ç–µ –∏–≥—Ä—É, –¥–æ–∂–¥–∏—Ç–µ—Å—å —Ä–∞–∑–¥–∞—á–∏ –∫–∞—Ä—Ç.

---

## 3. Service Worker –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 3.1: Background script –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[–ö–æ–∑—ë–ª –ü–æ–º–æ—â–Ω–∏–∫] Background script –∑–∞–≥—Ä—É–∂–µ–Ω
[Background] ‚úì Offscreen document —Å–æ–∑–¥–∞–Ω –¥–ª—è ML
```

–≠—Ç–∏ –ª–æ–≥–∏ –ø–æ–≤—Ç–æ—Ä—è—é—Ç—Å—è –ø–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏.

**–ü—Ä–∏—á–∏–Ω–∞:**
Chrome –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç Service Worker –ø–æ—Å–ª–µ 30 —Å–µ–∫—É–Ω–¥ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏. –≠—Ç–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ Manifest V3.

**–û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ:**
- Service Worker –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–æ–≤—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
- Offscreen document –ø–µ—Ä–µ—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ML —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ IndexedDB

**–ù–µ —Ç—Ä–µ–±—É–µ—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è.**

---

### –ü—Ä–æ–±–ª–µ–º–∞ 3.2: Offscreen document —É–Ω–∏—á—Ç–æ–∂–µ–Ω

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[Background] –û—à–∏–±–∫–∞ –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤ offscreen: ... –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç
```

**–ü—Ä–∏—á–∏–Ω–∞:**
Chrome —É–Ω–∏—á—Ç–æ–∂–∏–ª offscreen document (—Ä–µ–¥–∫–∏–π —Å–ª—É—á–∞–π).

**–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–µ—à–µ–Ω–∏–µ:**
`forwardToOffscreen()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ—Å–æ–∑–¥–∞—Å—Ç offscreen document –ø—Ä–∏ —Å–ª–µ–¥—É—é—â–µ–º –∑–∞–ø—Ä–æ—Å–µ.

**–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞:**
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ offscreen document –Ω–∞ –æ—à–∏–±–∫–∏

---

## 4. –ü—Ä–æ–±–ª–µ–º—ã —Å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º

### –ü—Ä–æ–±–ª–µ–º–∞ 4.1: Quota exceeded (IndexedDB)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[ML Model] ‚úó –û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –º–æ–¥–µ–ª–∏: QuotaExceededError
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ë—Ä–∞—É–∑–µ—Ä –∏—Å—á–µ—Ä–ø–∞–ª –ª–∏–º–∏—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è.

**–†–µ—à–µ–Ω–∏–µ:**

#### –í–∞—Ä–∏–∞–Ω—Ç A: –û—á–∏—Å—Ç–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ (F12):
const request = indexedDB.deleteDatabase('KozelGames');
request.onsuccess = () => console.log('–ò—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –æ—á–∏—â–µ–Ω–∞');
```

#### –í–∞—Ä–∏–∞–Ω—Ç B: –£–≤–µ–ª–∏—á–∏—Ç—å –ª–∏–º–∏—Ç (–≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö Chrome)
1. `chrome://settings/content/all`
2. –ù–∞–π–¥–∏—Ç–µ `chrome-extension://[YOUR_EXTENSION_ID]`
3. –£–≤–µ–ª–∏—á—å—Ç–µ –ª–∏–º–∏—Ç —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

---

### –ü—Ä–æ–±–ª–µ–º–∞ 4.2: –ú–æ–¥–µ–ª—å –Ω–µ –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø–æ—Å–ª–µ –æ–±—É—á–µ–Ω–∏—è

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[ML Offscreen] ‚úì –û–±—É—á–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–µ–Ω–æ —É—Å–ø–µ—à–Ω–æ
[ML Offscreen] ‚ÑπÔ∏è ML –≥–æ—Ç–æ–≤ –∫ –æ–±—É—á–µ–Ω–∏—é (–º–æ–¥–µ–ª—å –Ω–µ –Ω–∞–π–¥–µ–Ω–∞)  # –ü–æ—Å–ª–µ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∏
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–û—à–∏–±–∫–∞ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ IndexedDB.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ offscreen document:
indexedDB.databases().then(dbs => console.log(dbs));
```

–î–æ–ª–∂–Ω–∞ –±—ã—Ç—å –±–∞–∑–∞ `tensorflowjs`.

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –æ—à–∏–±–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–≤–æ—Ç—É —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ (—Å–º. 4.1)
3. –ü–µ—Ä–µ–æ–±—É—á–∏—Ç–µ –º–æ–¥–µ–ª—å –∑–∞–Ω–æ–≤–æ

---

## 5. UI –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 5.1: –ü–∞–Ω–µ–ª—å —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–π –Ω–µ –≤–∏–¥–Ω–∞

**–°–∏–º–ø—Ç–æ–º—ã:**
Content script —Ä–∞–±–æ—Ç–∞–µ—Ç (–≤–∏–¥–Ω—ã –ª–æ–≥–∏), –Ω–æ UI –ø–∞–Ω–µ–ª–∏ –Ω–µ—Ç.

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

#### A. CSS –Ω–µ –∑–∞–≥—Ä—É–∑–∏–ª—Å—è

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ (F12):
document.querySelector('.kozel-assistant-panel');
```

–ï—Å–ª–∏ `null`, —ç–ª–µ–º–µ–Ω—Ç –Ω–µ —Å–æ–∑–¥–∞–Ω.

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `styles/extension.css` —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ `manifest.json` ‚Üí `content_scripts` ‚Üí `css`
- –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ

---

#### B. Z-index –∫–æ–Ω—Ñ–ª–∏–∫—Ç

–ü–∞–Ω–µ–ª—å —Å–æ–∑–¥–∞–Ω–∞, –Ω–æ –∑–∞ –¥—Ä—É–≥–∏–º–∏ —ç–ª–µ–º–µ–Ω—Ç–∞–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

**–ü—Ä–æ–≤–µ—Ä–∫–∞:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏:
const panel = document.querySelector('.kozel-assistant-panel');
console.log(getComputedStyle(panel).zIndex);
```

–î–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤—ã—Å–æ–∫–∏–π z-index (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10000).

**–†–µ—à–µ–Ω–∏–µ:**
–£–≤–µ–ª–∏—á—å—Ç–µ z-index –≤ `styles/extension.css`.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 5.2: –ü–∞–Ω–µ–ª—å –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–µ—Ç –∏–≥—Ä–æ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã

**–†–µ—à–µ–Ω–∏–µ:**
–ò–∑–º–µ–Ω–∏—Ç–µ `position` –∏–ª–∏ `top/left` –≤ `styles/extension.css` –≤—Ä—É—á–Ω—É—é –∏–ª–∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–∑–∏—Ü–∏–∏.

---

## 6. –û—à–∏–±–∫–∏ –æ–±—É—á–µ–Ω–∏—è ML

### –ü—Ä–æ–±–ª–µ–º–∞ 6.1: "–ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è"

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[ML Offscreen] ‚úó –ù–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –æ–±—É—á–µ–Ω–∏—è
```

**–ü—Ä–∏—á–∏–Ω–∞:**
–ú–µ–Ω—å—à–µ 3 –∏–≥—Ä –≤ –∏—Å—Ç–æ—Ä–∏–∏.

**–†–µ—à–µ–Ω–∏–µ:**
–°—ã–≥—Ä–∞–π—Ç–µ –±–æ–ª—å—à–µ –∏–≥—Ä. ML —Ç—Ä–µ–±—É–µ—Ç –º–∏–Ω–∏–º—É–º 3 –∏–≥—Ä—ã –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ –æ–±—É—á–µ–Ω–∏—è.

---

### –ü—Ä–æ–±–ª–µ–º–∞ 6.2: Loss –Ω–µ —Å–Ω–∏–∂–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
```
[ML Offscreen] Epoch 1: loss=2.567
[ML Offscreen] Epoch 20: loss=2.551  # –ü–æ—á—Ç–∏ –Ω–µ –∏–∑–º–µ–Ω–∏–ª—Å—è
```

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- –ú–∞–ª–æ –¥–∞–Ω–Ω—ã—Ö (< 10 –∏–≥—Ä)
- Learning rate —Å–ª–∏—à–∫–æ–º –Ω–∏–∑–∫–∏–π/–≤—ã—Å–æ–∫–∏–π
- –ù–∞–≥—Ä–∞–¥—ã (rewards) –Ω–µ —Ä–∞–∑–ª–∏—á–∞—é—Ç—Å—è

**–†–µ—à–µ–Ω–∏–µ:**
- –°—ã–≥—Ä–∞–π—Ç–µ 20-30 –∏–≥—Ä
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ `reward` –≤ `move-history.js` –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω (–≤—ã–∏–≥—Ä—ã—à = +10, –ø—Ä–æ–∏–≥—Ä—ã—à = -10)

---

## 7. Debugging

### –ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –∫–æ–Ω—Å–æ–ª–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤:

1. **Content Script** (—Å—Ç—Ä–∞–Ω–∏—Ü–∞ kozel-online.com):
   - F12 –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ ‚Üí Console

2. **Background Service Worker**:
   - `chrome://extensions/` ‚Üí "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: service worker"

3. **Offscreen Document**:
   - `chrome://extensions/` ‚Üí "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–∏—è: offscreen document"
   - –ò–ª–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ background –≤—ã–ø–æ–ª–Ω–∏—Ç–µ:
     ```javascript
     chrome.runtime.getContexts({
         contextTypes: ['OFFSCREEN_DOCUMENT']
     }).then(contexts => console.log(contexts));
     ```

4. **Popup**:
   - –ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
   - –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí "–ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∫–æ–¥"

---

## 8. –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### Q: –ú–æ–∂–Ω–æ –ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –≤ –†–µ–∂–∏–º–µ –ò–Ω–∫–æ–≥–Ω–∏—Ç–æ?

**A:** –î–∞, –Ω–æ –Ω—É–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å:
1. `chrome://extensions/`
2. "–ö–æ–∑—ë–ª –ü–æ–º–æ—â–Ω–∏–∫" ‚Üí –î–µ—Ç–∞–ª–∏
3. –í–∫–ª—é—á–∏—Ç—å "–†–∞–∑—Ä–µ—à–∏—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –≤ —Ä–µ–∂–∏–º–µ –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ"

**–í–Ω–∏–º–∞–Ω–∏–µ:** ML –º–æ–¥–µ–ª—å –∏ –∏—Å—Ç–æ—Ä–∏—è –∏–≥—Ä –ù–ï —Å–æ—Ö—Ä–∞–Ω—è—Ç—Å—è –ø–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –∏–Ω–∫–æ–≥–Ω–∏—Ç–æ.

---

### Q: –†–∞–±–æ—Ç–∞–µ—Ç –ª–∏ ML –æ—Ñ–ª–∞–π–Ω?

**A:** –î–∞, –ø–æ–ª–Ω–æ—Å—Ç—å—é. –ü–æ—Å–ª–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ `tf.min.js` –≤—Å–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ –±–µ–∑ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞ (–µ—Å–ª–∏ kozel-online.com –¥–æ—Å—Ç—É–ø–µ–Ω –æ—Ñ–ª–∞–π–Ω —á–µ—Ä–µ–∑ Service Worker).

---

### Q: –ö–∞–∫ —ç–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ–±—É—á–µ–Ω–Ω—É—é –º–æ–¥–µ–ª—å?

**A:** –í —Ç–µ–∫—É—â–µ–π –≤–µ—Ä—Å–∏–∏ (V2.0) —ç–∫—Å–ø–æ—Ä—Ç –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è. –ó–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–æ –≤ V2.1.

–í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ (—á–µ—Ä–µ–∑ –∫–æ–Ω—Å–æ–ª—å offscreen document):
```javascript
// –≠–∫—Å–ø–æ—Ä—Ç –º–æ–¥–µ–ª–∏
await mlModel.model.save('downloads://kozel-ml-model');
```

---

### Q: –ö–∞–∫ —Å–±—Ä–æ—Å–∏—Ç—å ML –º–æ–¥–µ–ª—å?

**A:**
```javascript
// –í –∫–æ–Ω—Å–æ–ª–∏ (F12):
const request = indexedDB.deleteDatabase('tensorflowjs');
request.onsuccess = () => {
    console.log('ML –º–æ–¥–µ–ª—å —É–¥–∞–ª–µ–Ω–∞');
    location.reload();  // –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—Ç—Ä–∞–Ω–∏—Ü—É
};
```

---

## 9. –°–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–∞—Ö

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ `bash scripts/check_all.sh` –∏ —Å–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—ã–≤–æ–¥
2. –û—Ç–∫—Ä–æ–π—Ç–µ –∫–æ–Ω—Å–æ–ª–∏ –≤—Å–µ—Ö –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–≤ (—Å–º. —Ä–∞–∑–¥–µ–ª 7)
3. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –≤—Å–µ –ª–æ–≥–∏ —Å –æ—à–∏–±–∫–∞–º–∏
4. –°–æ–∑–¥–∞–π—Ç–µ issue –Ω–∞ GitHub: https://github.com/Damirinho9/kosel-online/issues

**–í–∫–ª—é—á–∏—Ç–µ –≤ –æ—Ç—á–µ—Ç:**
- –í–µ—Ä—Å–∏—é Chrome: `chrome://version/`
- –í–µ—Ä—Å–∏—é —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è: `manifest.json` ‚Üí `version`
- –í—ã–≤–æ–¥ `scripts/check_all.sh`
- –õ–æ–≥–∏ –∫–æ–Ω—Å–æ–ª–µ–π (content, background, offscreen)
- –®–∞–≥–∏ –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

---

## 10. –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è
bash scripts/check_all.sh

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Ñ–∞–π–ª–∞
node -c kozel-assistant/content.js

# –í–∞–ª–∏–¥–∞—Ü–∏—è manifest.json
python3 -m json.tool kozel-assistant/manifest.json

# –†–∞–∑–º–µ—Ä TensorFlow.js
ls -lh kozel-assistant/lib/tf.min.js

# –°–ø–∏—Å–æ–∫ IndexedDB –±–∞–∑ (–≤ –∫–æ–Ω—Å–æ–ª–∏ –±—Ä–∞—É–∑–µ—Ä–∞)
indexedDB.databases().then(dbs => console.table(dbs))
```
